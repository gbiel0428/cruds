import os
import time
from dataclasses import dataclass

os.system("cls || clear")  # Limpa o terminal no Windows e Linux

class Cliente:
    nome: str
    email: str
    telefone: str

    def __init__(self, nome, email, teleforne):
        self.nome = nome
        self.email = email
        self.telefone = teleforne

    def mostrar_dados(self):
        print(f"Nome: {self.nome}\nE-mail: {self.email}\nTelefone: {self.telefone}")

def lista_esta_vazia(lista_clientes):
    if not lista_clientes:
        print("\n Não há clientes cadastrados.")
        return True
    return False

def adicionar_cliente(lista_clientes):
    print("\n--- Adicionar novo cliente ---")
    nome = input("Informe seu Nome: ")
    email = input("Informe o seu E-mail: ")
    teleforne = input("Informe o seu Telefone: ")

    novo_cliente = Cliente(nome=nome, email=email, teleforne=teleforne)
    lista_clientes.append(novo_cliente)
    print(f"\nCliente {nome} adicionado com sucesso!")

def encontrar_cliente_por_email(lista_clientes, email_buscar):
    email_buscar_lower = email_buscar.lower()
    for cliente in lista_clientes:
        if cliente.email.lower() == email_buscar_lower:
            return cliente
    return None

def mostrar_todos_clientes(lista_clientes):
    if lista_esta_vazia(lista_clientes):
        return
    print("\n--- Lista de Clientes ---")
    for cliente in lista_clientes:
        cliente.mostrar_dados()

def atualizar_clientes(lista_clientes):
    if lista_esta_vazia(lista_clientes):
        return

    mostrar_todos_clientes(lista_clientes)
    print("--- Atualizar dados do cliente ---")
    email_buscar = input("\nDigite o Email do cliente: ")
    cliente_para_atualizar = encontrar_cliente_por_email(lista_clientes, email_buscar)

    if cliente_para_atualizar:
        print("\nPessoa encontrada.")
        print("\nInforme os novos dados ou deixe em branco para manter o valor atual.")

        print(f"\nNome atual: {cliente_para_atualizar.nome}")
        novo_nome = input("Novo nome: ")

        print(f"\nE-mail atual: {cliente_para_atualizar.email}")
        novo_mail = input("Novo email: ")

        print(f"\nTelefone atual: {cliente_para_atualizar.telefone}")
        novo_telefone = input("Novo telefone: ")

        if novo_nome:
            cliente_para_atualizar.nome = novo_nome
        if novo_mail:
            cliente_para_atualizar.email = novo_mail
        if novo_telefone:
            cliente_para_atualizar.telefone = novo_telefone

        print(f"\nDados do cliente: {email_buscar} atualizados com sucesso!")
    else:
        print(f"\nCliente com nome: {email_buscar} não encontrado.")

def excluir_cliente(lista_clientes):
    if lista_esta_vazia(lista_clientes):
        return
    mostrar_todos_clientes(lista_clientes)
    email_buscar = input("\nInforme o E-mail do cliente que deseja excluir: ")

    cliente_para_remove = encontrar_cliente_por_email(lista_clientes, email_buscar)

    if cliente_para_remove:
        lista_clientes.remove(cliente_para_remove)
        print(f"\nCliente com o email: {email_buscar} excluído com sucesso!")
    else:
        print(f"\nCliente com o email: {email_buscar} não encontrado.")

lista_clientes = []

while True:
    print("""
    --- Gerenciador de  Clientes ---
    1 - Adicionar
    2 - Mostrar todos
    3 - Atualizar
    4 - Excluir
    0 - Sair
            """)
    try:
        opcao = int(input("Informe uma das opções acima: "))
    except ValueError:
        print("\nEntrada inválida. Informe um número...")
        time.sleep(2)
        os.system("cls || clear")
        continue

    match opcao:
        case 1:
            adicionar_cliente(lista_clientes)
        case 2:
            mostrar_todos_clientes(lista_clientes)
        case 3:
            atualizar_clientes(lista_clientes)
        case 4:
            excluir_cliente(lista_clientes)
        case 0:
            print("\nSaindo do programa...")
            break
        case _:
            print("\nOpção inválida. \nTente novamente.")

    if opcao != 1 and opcao != 0:
        time.sleep(4)
    elif opcao == 1:
        time.sleep(1)

    if opcao != 0:
        os.system("cls")
